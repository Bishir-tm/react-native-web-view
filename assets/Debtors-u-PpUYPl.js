import{u as l,a as m,r as o,T as u,j as e,S as b,M as p,a5 as f}from"./index-DQeOCy18.js";import{T as N}from"./TitleCard-BVJXsrCz.js";import{F as S}from"./ArrowPathIcon-B5x0kA_q.js";import{S as w}from"./SearchBar-YkfVzCuZ.js";import{M as D}from"./Layout-dtLEbaUA.js";import"./ErrorText-C3VDSOUb.js";import"./EyeIcon-CIkAS62p.js";const T=({searchQuery:t,setSearchQuery:r})=>(l(),e.jsxs("div",{className:"flex justify-between w-100 space-x-3",children:[e.jsx(w,{searchText:t,setSearchText:r,placeholderText:"Search Debtors..."}),e.jsxs("button",{onClick:()=>location.reload(),className:"btn btn-primary",children:[e.jsx(S,{className:"w-6 h-6"})," Reload"]})]})),y=()=>{const t=l(),r=m(s=>s.debtors.debtors||[]),a=m(s=>s.debtors.status),[n,j]=o.useState("");if(o.useEffect(()=>{a==="idle"&&t(u())},[t,a]),a==="loading")return e.jsx(b,{});const c=r.filter(s=>[s.customerName,s.phone,s.email].join(" ").toLowerCase().includes(n.toLowerCase()));return e.jsx(N,{title:"Debtors List",TopSideButtons:e.jsx(T,{searchQuery:n,setSearchQuery:j}),children:e.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[500px] w-full",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{className:"bg-base-100 border-b-4 text-md sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Total Amount (₦)"}),e.jsx("th",{children:"Amount Paid (₦)"}),e.jsx("th",{children:"Balance Owed (₦)"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.length>0?c.map((s,i)=>{var d,h,x;return e.jsxs("tr",{className:"border-spacing-x-3 border-collapse",children:[e.jsx("td",{className:"border",children:i+1}),e.jsx("td",{className:"border",children:s.customerDetails.name||"Unknown"}),e.jsx("td",{className:"border",children:s.customerDetails.phone||"N/A"}),e.jsx("td",{className:"border",children:s.totalAmount||"Unknown"}),e.jsx("td",{className:"border",children:(d=s.amountPaid)==null?void 0:d.toLocaleString()}),e.jsx("td",{className:"border",children:(h=s.balance)==null?void 0:h.toLocaleString()}),e.jsx("td",{className:"border",children:(x=new Date(s.updatedAt))==null?void 0:x.toLocaleString()}),e.jsx("td",{className:"border",children:e.jsx("button",{className:"btn btn-sm bg-primary text-white",onClick:()=>t(p({title:"Debt Payment",bodyType:D.REPAY_DEBT,extraObject:{debtor:s}})),children:"Pay Debt"})})]},i)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No debtors found."})})})]})})})};function k(){const t=l();return o.useEffect(()=>{t(f({title:"Debtors"}))},[]),e.jsx(y,{})}export{k as default};
