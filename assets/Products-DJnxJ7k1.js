import{r as c,u as x,a as h,A as w,j as e,S as P,M as l,aa as n,a5 as g}from"./index-DQeOCy18.js";import{T}from"./TitleCard-BVJXsrCz.js";import{M as d,C,b as S}from"./Layout-dtLEbaUA.js";import{F as E,a as O}from"./TrashIcon-DZgiwp0v.js";import{F as R}from"./ArrowPathIcon-B5x0kA_q.js";import{S as D}from"./SearchBar-YkfVzCuZ.js";import"./ErrorText-C3VDSOUb.js";import"./EyeIcon-CIkAS62p.js";function z({title:t,titleId:r,...a},o){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},a),t?c.createElement("title",{id:r},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const I=c.forwardRef(z),v=({searchQuery:t,setSearchQuery:r})=>{const a=x(),o=()=>{a(l({title:"Add New Product",bodyType:d.ADD_NEW_PRODUCT,size:"xl"}))};return e.jsxs("div",{className:"flex just items-center w-100 space-x-3",children:[e.jsx(D,{searchText:t,setSearchText:r,placeholderText:"Search Products...",styleClass:""}),(n("admin")||n("manager"))&&e.jsxs("button",{onClick:o,className:"btn btn-primary",children:[e.jsx(S,{className:"w-6 h-6 "})," Add New Product"]}),e.jsxs("button",{onClick:()=>location.reload(),className:"btn btn-primary",children:[e.jsx(R,{className:"w-6 h-6"})," Reload"]})]})},A=()=>{const t=x(),r=h(s=>s.products.products||[]),a=h(s=>s.products.status),o=h(s=>s.products.error),[b,p]=c.useState("");if(c.useEffect(()=>{a==="idle"&&t(w())},[t,a]),a==="loading")return e.jsx(P,{});const N=r.filter(s=>Object.values(s).some(i=>String(i).toLowerCase().includes(b.toLowerCase()))).map((s,i)=>{var j,u;const f=s.batches.reduce((y,k)=>y+k.quantity,0),m=s.unitsInPack>0?Math.floor(f/s.unitsInPack):0;return e.jsxs("tr",{className:"border-spacing-x-3 border-collapse",children:[e.jsx("td",{className:"border",children:i+1}),e.jsx("td",{className:"border",children:s.name}),e.jsx("td",{className:"border",children:s.category}),e.jsx("td",{className:"border",children:s.barcodeOrSku||"NIL"}),e.jsxs("td",{className:"border",children:["₦",((j=s.standardPackPrice)==null?void 0:j.toLocaleString())||"0.00"]}),e.jsxs("td",{className:"border",children:["₦",(u=s.standardUnitPrice)==null?void 0:u.toLocaleString()]}),e.jsx("td",{className:`border ${m<1&&"bg-error text-dark "}`,children:`${m===0?"Out of stock, Zero remaining":m} packs`}),e.jsx("td",{className:"border",children:s.unitsInPack}),e.jsx("td",{className:"border",children:e.jsx("button",{className:"btn btn-sm text-white bg-primary min-w-[70px]",onClick:()=>t(l({title:"Product Information",bodyType:d.VIEW_PRODUCT,extraObject:{...s}})),children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:block",children:"View"})]})})}),(n("admin")||n("manager"))&&e.jsx("td",{className:"border",children:e.jsx("button",{className:"btn btn-sm text-white bg-primary min-w-[70px]",onClick:()=>t(l({title:"Edit Product",bodyType:d.EDIT_PRODUCT,extraObject:s})),children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:block",children:"Edit"})]})})}),n("admin")&&e.jsx("td",{className:"border",children:e.jsx("button",{className:"btn btn-sm text-white btn-error min-w-[70px]",onClick:()=>t(l({title:"Delete Product ?",bodyType:d.CONFIRMATION,extraObject:{message:`Are you sure you want to delete the ${s.name} product ?`,type:C.DELETE_PRODUCT,id:s._id}})),children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:block",children:"Delete"})]})})})]},s._id)});return e.jsx(T,{title:"All Products",TopSideButtons:e.jsx(v,{searchQuery:b,setSearchQuery:p}),topMargin:"mt-2",children:e.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[500px] w-full",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{className:"bg-base-100 border-b-4 text-md sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border sticky top-0 z-20",children:"#"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Name"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Category"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Barcode/SKU"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Price per Pack"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Price per Unit"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Total Packs"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Units in Pack"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"View More"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Edit"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Delete"})]})}),e.jsx("tbody",{children:r.length>0?N:o?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:o.message})}):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No products found."})})})]})})})};function W(){const t=x();return c.useEffect(()=>{t(g({title:"Products"}))},[]),e.jsx(A,{})}export{W as default};
