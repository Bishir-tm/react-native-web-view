import{r,u as x,a as j,P as y,j as e,S as f,M as m,e as w,a5 as O}from"./index-DQeOCy18.js";import{T as R}from"./TitleCard-BVJXsrCz.js";import{M as h,C as S,b as E}from"./Layout-dtLEbaUA.js";import{F as g,a as k}from"./TrashIcon-DZgiwp0v.js";import{F as T}from"./ArrowPathIcon-B5x0kA_q.js";import{S as C}from"./SearchBar-YkfVzCuZ.js";import"./ErrorText-C3VDSOUb.js";import"./EyeIcon-CIkAS62p.js";function D({title:t,titleId:c,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":c},a),t?r.createElement("title",{id:c},t):null,r.createElement("path",{fillRule:"evenodd",d:"M12 1.5c-1.921 0-3.816.111-5.68.327-1.497.174-2.57 1.46-2.57 2.93V21.75a.75.75 0 0 0 1.029.696l3.471-1.388 3.472 1.388a.75.75 0 0 0 .556 0l3.472-1.388 3.471 1.388a.75.75 0 0 0 1.029-.696V4.757c0-1.47-1.073-2.756-2.57-2.93A49.255 49.255 0 0 0 12 1.5Zm3.53 7.28a.75.75 0 0 0-1.06-1.06l-6 6a.75.75 0 1 0 1.06 1.06l6-6ZM8.625 9a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm5.625 3.375a1.125 1.125 0 1 0 0 2.25 1.125 1.125 0 0 0 0-2.25Z",clipRule:"evenodd"}))}const z=r.forwardRef(D),A=({searchQuery:t,setSearchQuery:c})=>{x();const a=w(),l=()=>{a("/app/orders/add-new")};return e.jsxs("div",{className:"flex justify-between w-100 space-x-3",children:[e.jsx(C,{searchText:t,setSearchText:c,placeholderText:"Search Orders...",styleClass:""}),e.jsxs("button",{onClick:l,className:"btn btn-primary",children:[e.jsx(E,{className:"w-6 h-6"})," Add New Order"]}),e.jsxs("button",{onClick:()=>location.reload(),className:"btn btn-primary",children:[e.jsx(T,{className:"w-6 h-6"})," Reload"]})]})},M=()=>{const t=x(),c=j(s=>s.orders.orders||[]),a=j(s=>s.orders.status),[l,u]=r.useState("");if(r.useEffect(()=>{a==="idle"&&t(y())},[t,a]),a==="loading")return e.jsx(f,{});const b=c.filter(s=>{var i,n;return[s._id,(i=s==null?void 0:s.customerDetails)==null?void 0:i.name,s.paymentMethod,s.paymentStatus,(n=s.createdBy)==null?void 0:n.fullname,s.items.map(o=>{var d;return(d=o.productId)==null?void 0:d.name}).join(", ")].join(" ").toLowerCase().includes(l.toLowerCase())}),N=b.length>0?b.map((s,i)=>{var n,o;return e.jsxs("tr",{className:"border-spacing-x-3 border-collapse",children:[e.jsx("td",{className:"border",children:i+1}),e.jsx("td",{className:"border",children:((n=s==null?void 0:s.customerDetails)==null?void 0:n.name)||"Walk-In"}),e.jsxs("td",{className:"border",children:[s.items.length," ",s.items.map(d=>{var p;return e.jsxs("div",{children:[((p=d.productId)==null?void 0:p.name)||"Unknown Product"," ,"]},d._id)})]}),e.jsxs("td",{className:"border",children:["₦",(s.totalAmount??0).toLocaleString()]}),e.jsxs("td",{className:"border",children:["₦",(s.amountPaid??0).toLocaleString()]}),e.jsx("td",{className:"border",children:s.paymentMethod}),e.jsx("td",{className:"border",children:s.paymentStatus}),e.jsxs("td",{className:"border",children:["₦",(s.balance??0).toLocaleString()]}),e.jsxs("td",{className:"border",children:["By: ",(o=s.createdBy)==null?void 0:o.fullname," ",e.jsx("br",{}),"@"," ",new Date(s.createdAt).toLocaleString()]}),e.jsx("td",{className:"border",children:e.jsxs("button",{className:"btn btn-sm bg-success text-white",onClick:()=>t(m({title:"Receipt",bodyType:h.RECEIPT_MODAL,extraObject:{...s}})),children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden xl",children:"Receipt"})]})}),e.jsx("td",{className:"border",children:e.jsxs("button",{className:"btn btn-sm bg-primary text-white",onClick:()=>t(m({title:"Edit Order",bodyType:h.EDIT_ORDER,extraObject:s})),children:[e.jsx(g,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden xl",children:"Edit"})]})}),e.jsx("td",{className:"border",children:e.jsxs("button",{className:"btn btn-sm btn-error text-white",onClick:()=>t(m({title:"Delete Order?",bodyType:h.CONFIRMATION,extraObject:{message:"Are you sure you want to delete this order?",type:S.DELETE_ORDER,id:s._id}})),children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden xl",children:"Delete"})]})})]},s._id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"13",className:"text-center",children:"No orders found."})});return e.jsx(R,{title:"All Orders",TopSideButtons:e.jsx(A,{searchQuery:l,setSearchQuery:u}),children:e.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[500px] w-full",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{className:"bg-base-100 border-b-4 text-md sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border sticky top-0 z-20",children:"#"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Customer"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Items"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Total Amount"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Paid"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Payment Method"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Status"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Balance"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Created"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Receipt"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Edit"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Delete"})]})}),e.jsx("tbody",{children:N})]})})})};function $(){const t=x();return r.useEffect(()=>{t(O({title:"Orders"}))},[]),e.jsx(M,{})}export{$ as default};
