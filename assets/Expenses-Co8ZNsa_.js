import{u as m,a as o,r as i,Y as N,j as e,S as u,aa as a,M as d,a5 as f}from"./index-DQeOCy18.js";import{T as E}from"./TitleCard-BVJXsrCz.js";import{M as x,C as y,b as w}from"./Layout-dtLEbaUA.js";import{F as S,a as g}from"./TrashIcon-DZgiwp0v.js";import{F as T}from"./ArrowPathIcon-B5x0kA_q.js";import{S as k}from"./SearchBar-YkfVzCuZ.js";import"./ErrorText-C3VDSOUb.js";import"./EyeIcon-CIkAS62p.js";const C=({searchQuery:t,setSearchQuery:c})=>{const r=m(),n=()=>{r(d({title:"Add New Expense",bodyType:x.ADD_EXPENSE,size:"xl"}))};return e.jsxs("div",{className:"flex justify-between w-100 space-x-3",children:[e.jsx(k,{searchText:t,setSearchText:c,placeholderText:"Search Expenses...",styleClass:""}),(a("admin")||a("manager"))&&e.jsxs("button",{onClick:n,className:"btn btn-primary",children:[e.jsx(w,{className:"w-6 h-6 "})," Add New Expense"]}),e.jsxs("button",{onClick:()=>location.reload(),className:"btn btn-primary",children:[e.jsx(T,{className:"w-6 h-6"})," Reload"]})]})},D=()=>{const t=m(),c=o(s=>s.expenses.expenses||[]),r=o(s=>s.expenses.status),n=o(s=>s.expenses.error),[h,j]=i.useState("");if(i.useEffect(()=>{r==="idle"&&t(N())},[t,r]),r==="loading")return e.jsx(u,{});const b=c.filter(s=>{var l;return[s._id,s.category,s.amount,s.invoice,s.description,(l=s.createdBy)==null?void 0:l.fullname].join(" ").toLowerCase().includes(h.toLowerCase())}).map((s,l)=>{var p;return e.jsxs("tr",{className:"border-spacing-x-3 border-collapse",children:[e.jsx("td",{className:"border",children:l+1}),e.jsx("td",{className:"border",children:s.invoice}),e.jsx("td",{className:"border",children:s.category}),e.jsx("td",{className:"border",children:(p=s.amount)==null?void 0:p.toLocaleString("en-US",{style:"currency",currency:"NGN"})}),e.jsx("td",{className:"border",children:new Date(s.date).toLocaleDateString()}),(a("admin")||a("manager"))&&e.jsx("td",{className:"border",children:e.jsx("button",{className:"btn btn-sm text-white bg-primary min-w-[70px]",onClick:()=>t(d({title:"Edit Expense",bodyType:x.EDIT_EXPENSE,extraObject:s})),children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:block",children:"Edit"})]})})}),a("admin")&&e.jsx("td",{className:"border",children:e.jsx("button",{className:"btn btn-sm text-white btn-error min-w-[70px]",onClick:()=>t(d({title:"Delete Expense?",bodyType:x.CONFIRMATION,extraObject:{message:`Are you sure you want to delete the expense with reference ${s.invoice}?`,type:y.DELETE_EXPENSE,id:s._id}})),children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(g,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:block",children:"Delete"})]})})})]},s._id)});return e.jsx(E,{title:"All Expenses",TopSideButtons:e.jsx(C,{searchQuery:h,setSearchQuery:j}),topMargin:"mt-2",children:e.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[500px] w-full",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{className:"bg-base-100 border-b-4 text-md sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border sticky top-0 z-20",children:"#"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Reference/Invoice"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Category"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Amount"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Created"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Edit"}),e.jsx("th",{className:"border sticky top-0 z-20",children:"Delete"})]})}),e.jsx("tbody",{children:c.length>0?b:n?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:n.message})}):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No expenses found."})})})]})})})};function I(){const t=m();return i.useEffect(()=>{t(f({title:"Expenses"}))},[]),e.jsx(D,{})}export{I as default};
