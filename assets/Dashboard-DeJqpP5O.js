import{r as t,j as e,e as C,u as D,a as N,a6 as P,g as A,a7 as L,a8 as R,M as m,a9 as M,aa as o,a5 as O}from"./index-DQeOCy18.js";import{M as x,F as w,a as T}from"./Layout-dtLEbaUA.js";import{R as B,L as H,C as $,X as F,Y as f,T as _,a as y}from"./LineChart-Cxa1Klpj.js";import"./ErrorText-C3VDSOUb.js";import"./EyeIcon-CIkAS62p.js";function I({title:r,titleId:a,...s},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},s),r?t.createElement("title",{id:a},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const Z=t.forwardRef(I);function V({title:r,titleId:a,...s},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},s),r?t.createElement("title",{id:a},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const j=t.forwardRef(V);function W({title:r,titleId:a,...s},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},s),r?t.createElement("title",{id:a},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const k=t.forwardRef(W);function z({title:r,titleId:a,...s},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},s),r?t.createElement("title",{id:a},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const E=t.forwardRef(z);function Y({title:r,titleId:a,...s},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},s),r?t.createElement("title",{id:a},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const S=t.forwardRef(Y),u=({title:r,value:a,icon:s,trend:n,trendValue:l,description:h})=>e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"card-title text-sm opacity-70",children:r}),e.jsxs("div",{className:"flex items-baseline gap-2 mt-1",children:[e.jsx("span",{className:"text-2xl font-bold",children:a}),n&&e.jsxs("span",{className:`badge ${l>=0?"badge-success":"badge-error"} gap-1`,children:[l>=0?"↑":"↓"," ",Math.abs(l),"%"]})]}),h&&e.jsx("p",{className:"text-sm opacity-70 mt-2",children:h})]}),e.jsx(s,{className:"w-8 h-8 opacity-70"})]})})}),K=()=>{var p,g;const r=C(),a=D(),{stats:s,loading:n,error:l}=N(i=>i.dashboard),{notifications:h}=N(i=>i.rightDrawer);return t.useEffect(()=>{s.expiringProducts.length&&(a(P({message:` ${s.expiringProducts.length} Product(s) expiring soon`,status:0})),a(A(h.length)))},[s,a]),t.useEffect(()=>{L(R())?a(m({title:"Session Expired",bodyType:x.SESSION_EXPIRED,extraObject:{}})):a(M())},[a]),n?e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):l?e.jsx("div",{className:"alert alert-error",children:l}):e.jsxs("div",{className:"p-4 max-w-[1920px] mx-auto",children:[s.lowStockProducts.length||s.expiringProducts.length?e.jsxs("div",{className:"alert alert-warning mb-6",children:[e.jsx(E,{className:"w-6 h-6"}),e.jsxs("span",{children:[s.lowStockProducts.length>1&&s.lowStockProducts.length+" products below minimum stock threshold - ",s.lowStockProducts.length===1&&" 1 product below minimum stock threshold - ",s.expiringProducts.length>1&&s.expiringProducts.length+" products expiring soon",s.expiringProducts.length===1&&" 1 product expiring soon"]})," ",e.jsx("a",{href:"#expiring-products",className:"btn btn-sm",children:"View Details"})]}):"",e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 mb-6 center justify-center",children:[e.jsx(u,{title:"Products Sold Today",value:s.todaysSales?s.todaysSales.length:0,icon:S,trend:!0,trendValue:-5,description:"Number of Prducts sold today"}),e.jsx(u,{title:"Total Sales Today",value:s.todaysSales?`₦ ${(g=(p=s.todaysSales)==null?void 0:p.reduce((i,c)=>i+c.totalAmount,0))==null?void 0:g.toLocaleString()}`:0,icon:Z,trend:!0,trendValue:-5,description:"Total sales amount today"}),e.jsx(u,{title:"Total Products",value:s.productCount,icon:w,description:"Across all categories"}),e.jsx(u,{title:"Items Near Expiry",value:s.itemsNearExpiry,icon:k,description:"Expiring within 90 days"})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl mb-6",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2  gap-4",children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>a(m({title:"New Order",bodyType:x.ADD_ORDER,extraObject:{},size:"xl"})),children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),"New Order"]}),(o("admin")||o("manager"))&&e.jsxs("button",{className:"btn btn-secondary",onClick:()=>a(m({title:"Add Stock",bodyType:x.ADD_PURCHASE,extraObject:{},size:"xl"})),children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),"Add Stock"]}),(o("admin")||o("manager"))&&e.jsxs("button",{className:"btn btn-accent",onClick:()=>a(m({title:"Add Product",bodyType:x.ADD_NEW_PRODUCT,extraObject:{},size:"xl"})),children:[e.jsx(w,{className:"w-5 h-5 mr-2"}),"Add Product"]}),e.jsxs("button",{className:"btn btn-info",onClick:()=>r("/app/products"),children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"Products"]}),e.jsxs("button",{className:"btn btn-warning",onClick:()=>r("/app/orders"),children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"View Orders"]}),(o("admin")||o("manager"))&&e.jsxs("button",{className:"btn btn-error",onClick:()=>r("/app/suppliers"),children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"Suppliers"]})]}),e.jsxs("div",{className:"stats stats-vertical shadow mt-4",children:[e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Total Products"}),e.jsx("div",{className:"stat-value",children:s.productCount}),e.jsx("div",{className:"stat-desc",children:"Across all categories"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Total Categories"}),e.jsx("div",{className:"stat-value",children:s.categoryCount}),e.jsx("div",{className:"stat-desc",children:"Active categories"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-6",children:[e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Sales & Orders Trend"}),e.jsx("div",{className:"h-[400px]",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(H,{data:s.monthlyOrders.map(i=>{var c;return{month:(c=new Date(0,i._id.month-1))==null?void 0:c.toLocaleString("default",{month:"short"}),sales:i.totalSales,orders:i.orderCount}}),children:[e.jsx($,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"month"}),e.jsx(f,{yAxisId:"left"}),e.jsx(f,{yAxisId:"right",orientation:"right"}),e.jsx(_,{}),e.jsx(y,{yAxisId:"left",type:"monotone",dataKey:"sales",stroke:"#570DF8"}),e.jsx(y,{yAxisId:"right",type:"monotone",dataKey:"orders",stroke:"#36D399"})]})})})]})}),e.jsx("div",{className:"card bg-base-100 shadow-xl",id:"expiring-products",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h2",{className:"card-title flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Products Expiring Soon"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Expiry Date"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:s.expiringProducts.map((i,c)=>{const d=Math.ceil((new Date(i.expiringBatches[0].expiryDate)-new Date)/864e5);return e.jsxs("tr",{children:[e.jsx("td",{children:i.name}),e.jsxs("td",{children:[i.totalExpiringQuantity," units"]}),e.jsx("td",{children:new Date(i.expiringBatches[0].expiryDate).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})}),e.jsx("td",{children:e.jsxs("span",{className:`badge ${d<=7?"badge-error":d<=14?"badge-warning":"badge-success"}`,children:[d," days left"]})})]},c)})})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h2",{className:"card-title flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-error"}),"Low Stock Alerts"]}),e.jsx("div",{className:"space-y-4",children:s.lowStockProducts.map((i,c)=>e.jsx("div",{className:"bg-error bg-opacity-10 p-4 rounded-lg",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:i.name}),e.jsxs("p",{className:"text-sm opacity-70",children:["Current Stock: ",i.totalStock]})]})})},c))})]})}),e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Recent Activity"}),e.jsx("div",{className:"space-y-4",children:s.recentActivity.map((i,c)=>{var d,b,v;return e.jsxs("div",{className:"flex items-center justify-between p-3 border border-base-300 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Order ",i._id]}),e.jsx("p",{className:"text-sm opacity-70",children:(d=i.customerDetails)==null?void 0:d.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["₦",(b=i.totalAmount)==null?void 0:b.toLocaleString()]}),e.jsx("p",{className:"text-sm opacity-70",children:(v=new Date(i.createdAt))==null?void 0:v.toLocaleString()})]})]},c)})})]})})]})]})};function J(){const r=D();return t.useEffect(()=>{r(O({title:"Dashboard"}))},[]),e.jsx(K,{})}export{J as default};
