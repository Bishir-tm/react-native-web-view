import{u as i,a as l,r as o,K as h,j as e,S as j,M as d,aa as m,a5 as b}from"./index-DQeOCy18.js";import{T as u}from"./TitleCard-BVJXsrCz.js";import{M as n,C as p,b as N}from"./Layout-dtLEbaUA.js";import{F as f,a as w}from"./TrashIcon-DZgiwp0v.js";import{F as C}from"./ArrowPathIcon-B5x0kA_q.js";import"./ErrorText-C3VDSOUb.js";import"./EyeIcon-CIkAS62p.js";const E=()=>{const t=i(),r=()=>{t(d({title:"Add New Customer",bodyType:n.ADD_NEW_CUSTOMER,size:"xl"}))};return e.jsx("div",{className:"flex justify-between w-100 space-x-3",children:m("admin")&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:r,className:"btn btn-primary",children:[e.jsx(N,{className:"w-6 h-6"})," Add New Customer"]}),e.jsxs("button",{onClick:()=>location.reload(),className:"btn btn-primary",children:[e.jsx(C,{className:"w-6 h-6"})," Reload"]})]})})},y=()=>{const t=i(),r=l(s=>s.customers.customers||[]),a=l(s=>s.customers.status),c=l(s=>s.customers.error);if(o.useEffect(()=>{a==="idle"&&t(h())},[t,a]),a==="loading")return e.jsx(j,{});const x=r.map(s=>e.jsxs("tr",{className:"border-spacing-x-3 border-collapse",children:[e.jsx("td",{className:"border-2",children:s.fullname}),e.jsx("td",{className:"border-2",children:s.email||"NIL"}),e.jsx("td",{className:"border-2",children:s.phone}),e.jsx("td",{className:"border-2",children:s.address||"NIL"}),e.jsx("td",{className:"border-2",children:s.debtLimit||0}),e.jsx("td",{className:"border-2",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("td",{className:"border-2",children:e.jsx("button",{className:"btn btn-sm text-white bg-primary min-w-[70px]",onClick:()=>t(d({title:"Edit Customer",bodyType:n.EDIT_CUSTOMER,extraObject:s,size:"xl"})),children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(f,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:block",children:"Edit"})]})})}),e.jsx("td",{className:"border-2",children:e.jsx("button",{className:"btn btn-sm text-white btn-error min-w-[70px]",onClick:()=>t(d({title:"Delete Customer?",bodyType:n.CONFIRMATION,extraObject:{message:`Are you sure you want to delete the customer "${s.fullname}"?`,type:p.DELETE_CUSTOMER,id:s._id}})),children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(w,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:block",children:"Delete"})]})})})]},s._id));return e.jsx(u,{title:"All Customers",TopSideButtons:e.jsx(E,{}),topMargin:"mt-2",children:m("admin")?e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs("table",{className:"table table-zebra w-full table-pin-rows",children:[e.jsx("thead",{className:"border-b-4 border-primary text-md",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Full Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Debt Limit (â‚¦)"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Edit"}),e.jsx("th",{children:"Delete"})]})}),e.jsx("tbody",{children:r.length>0?x:c?c.message:e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center",children:"No customers found."})})})]})}):e.jsx("div",{className:"text-center text-error font-bold text-2xl",children:"Access Denied, You do not have permission to view customers."})})};function M(){const t=i();return o.useEffect(()=>{t(b({title:"Customers"}))},[]),e.jsx(y,{})}export{M as default};
